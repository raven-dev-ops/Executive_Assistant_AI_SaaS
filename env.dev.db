# DB-backed developer profile (SQLite persistence, stubbed external services)
#
# Usage (from backend/):
#   uvicorn app.main:app --reload --env-file ..\\env.dev.db
#
# This profile:
# - Uses SQLite for customers/appointments/conversations.
# - Keeps calendar/SMS in stub mode unless you add real credentials.
# - Requires tenant API keys and an owner token for dashboard/CRM access.

# Core DB settings
DATABASE_URL=sqlite:///./app.db
USE_DB_CUSTOMERS=true
USE_DB_APPOINTMENTS=true
USE_DB_CONVERSATIONS=true
SESSION_STORE_BACKEND=memory
# Optional shared session store for multi-instance dev/staging
# REDIS_URL=redis://localhost:6379/0

# Auth / tenancy
REQUIRE_BUSINESS_API_KEY=true
ADMIN_API_KEY=dev-admin-key
OWNER_DASHBOARD_TOKEN=dev-owner-token
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0

# Calendar (stub by default; flip CALENDAR_USE_STUB to false when ready)
GOOGLE_CALENDAR_ID=primary
GOOGLE_CALENDAR_CREDENTIALS_FILE=
CALENDAR_USE_STUB=true

# SMS / Twilio (stub by default; configure real values for Twilio testing)
SMS_PROVIDER=stub
SMS_FROM_NUMBER=
SMS_OWNER_NUMBER=
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
VERIFY_TWILIO_SIGNATURES=false
STREAM_DEDUPE_TTL_SECONDS=600
SMS_EVENT_DEDUPE_TTL_SECONDS=300
SMS_PER_NUMBER_PER_MINUTE=0
SMS_PER_NUMBER_BURST=0
RATE_LIMIT_ANOMALY_THRESHOLD_BUSINESS=0
RATE_LIMIT_ANOMALY_THRESHOLD_IP=0
RATE_LIMIT_ANOMALY_THRESHOLD_5XX=0
TWILIO_WEBHOOK_FAILURE_ALERT_THRESHOLD=0
BILLING_WEBHOOK_FAILURE_ALERT_THRESHOLD=0
LATENCY_ALERT_THRESHOLD_MS=0
LATENCY_ALERT_PATHS=/v1/voice,/v1/chat,/v1/widget

# Locale / vertical
DEFAULT_LANGUAGE_CODE=en
DEFAULT_VERTICAL=plumbing

# Voice streaming + intent tuning (staging/prod should override host)
TWILIO_STREAMING_ENABLED=true
TWILIO_STREAM_BASE_URL=wss://stream.stub.local/v1/twilio/voice-stream
NLU_INTENT_THRESHOLD=0.4
